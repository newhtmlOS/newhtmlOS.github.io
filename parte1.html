<!doctype html>

<html lang="pt-BR" data-theme="dark">
<head>
  <link rel="manifest" href="manifest.webmanifest">
<meta name="theme-color" content="#0b1220">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('./sw.js').catch(console.error);
  });
}
</script>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,maximum-scale=1"/>
<title>htmlOS — v7 (Assistente com parser matemático avançado)</title>
<meta name="theme-color" content="#0b1220" media="(prefers-color-scheme: dark)">
<meta name="theme-color" content="#eef2f8" media="(prefers-color-scheme: light)">
<style>
:root{
  --bg:#0b1220; --panel:#0f1724; --accent:#22d3ee; --accent2:#60a5fa;
  --text:#e6eef8; --muted:#9fb1c9;
  --glass: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  --stroke: rgba(255,255,255,0.10); --hover: rgba(255,255,255,0.06);
  --shadow: 0 12px 30px rgba(0,0,0,.45);
  --radius: 16px;
  --safe-b: env(safe-area-inset-bottom, 0px);
  --safe-t: env(safe-area-inset-top, 0px);
  --sys-h: 64px;
}
:root[data-theme="light"]{
  --bg:#eef2f8; --panel:#ffffff; --accent:#0ea5e9; --accent2:#6366f1;
  --text:#0f172a; --muted:#475569; --stroke: rgba(0,0,0,0.10); --hover: rgba(0,0,0,0.05);
  --shadow: 0 12px 30px rgba(0,0,0,.12);
}*{box-sizing:border-box} html,body{height:100%;margin:0;padding:0;overflow:hidden;background:linear-gradient(180deg,#071026 0%, #09172a 50%, #071222 100%)} :root[data-theme="light"] body{background:linear-gradient(180deg,#f4f7fb 0%, #eef2f8 50%, #e8edf6 100%)} body{color:var(--text);font:14px/1.35 Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial} @media (prefers-reduced-motion:no-preference){ *{transition:background-color .25s,color .25s,border-color .25s,opacity .2s,transform .12s} }

#root{position:relative;width:100vw;height:100dvh;min-height:100svh;display:flex;flex-direction:column;overflow:hidden} .desktop{flex:1;display:flex;flex-direction:column;overflow:hidden} .wallpaper{flex:1;padding:18px 18px 0;display:flex;flex-direction:column;gap:14px;overflow:auto; background: radial-gradient(1200px 600px at -10% -20%, color-mix(in oklab, var(--accent) 22%, transparent) 0%, transparent 60%), radial-gradient(900px 600px at 120% 120%, color-mix(in oklab, var(--accent2) 18%, transparent) 0%, transparent 60%); } .homeActions{display:flex;gap:10px;align-self:flex-end} .fsBtn{display:inline-flex;align-items:center;gap:8px;padding:10px 12px;border-radius:12px; background:var(--panel);border:1px solid var(--stroke);cursor:pointer;color:var(--text);box-shadow:var(--shadow);user-select:none} .fsBtn:hover{background:var(--hover)} .fsBtn svg{width:18px;height:18px}

.grid{display:grid; gap:16px; grid-template-columns: repeat(auto-fill, minmax(98px, 1fr));} .appIcon{background:var(--glass); border:1px solid var(--stroke); border-radius:18px; padding:12px; box-shadow: var(--shadow); cursor:pointer; user-select:none; display:flex; flex-direction:column; align-items:center; gap:10px;} .appIcon:hover{background:var(--hover); transform:translateY(-1px)} .appIcon svg{width:38px;height:38px} .appIcon .label{font-size:12px;color:var(--muted);text-align:center}

.taskbar{display:flex; align-items:center; gap:10px;height:54px; padding:8px 10px; background:linear-gradient(0deg, rgba(0,0,0,0.35), rgba(255,255,255,0.02)); backdrop-filter: blur(8px); border-top:1px solid var(--stroke)} .start{width:38px;height:38px;border-radius:12px;background:var(--panel);border:1px solid var(--stroke);display:flex;align-items:center;justify-content:center;cursor:pointer} .tasks{display:flex;gap:6px;align-items:center;flex:1;overflow:auto} .taskBtn{border:1px solid var(--stroke);background:var(--panel);color:var(--text);padding:8px 12px;border-radius:12px;white-space:nowrap} .clock{min-width:84px;text-align:right;color:var(--muted);font-variant-numeric:tabular-nums}

.startMenu{position:absolute;left:12px;right:12px;bottom:64px;background:var(--panel);border:1px solid var(--stroke);border-radius:18px;box-shadow:var(--shadow);padding:12px;display:none;z-index:30} .startMenu.visible{display:block} .startMenu .row{display:flex;gap:8px;flex-wrap:wrap} .startMenu button{border:1px solid var(--stroke);background:var(--glass);color:var(--text);padding:10px 12px;border-radius:12px;cursor:pointer}

.window{position:absolute; left:64px; top:64px; width:780px; height:520px;background:var(--glass); border:1px solid var(--stroke); border-radius:16px; box-shadow: var(--shadow); display:flex; flex-direction:column; overflow:hidden} .titlebar{height:44px; display:flex; align-items:center; gap:8px; padding:0 10px; background:linear-gradient(180deg, rgba(255,255,255,0.03), transparent)} .title{flex:1; font-weight:700} .controls{display:flex; gap:6px} .ctrl{width:28px;height:28px;border-radius:10px;display:inline-flex;align-items:center;justify-content:center;cursor:pointer} .ctrl:hover{background:var(--hover)} .content{flex:1; overflow:auto; padding:12px; background:linear-gradient(180deg, rgba(255,255,255,0.006), transparent)}

@media (max-width: 900px){ .taskbar.hideOnMobile{display:none !important} .window.mobile-full{position:fixed; inset:0; width:100vw; height:100dvh; border-radius:0; left:0 !important; top:0 !important; border:none} .window.mobile-full .titlebar{display:none} .window.mobile-full .content{padding:10px; padding-bottom:calc(var(--sys-h) + var(--safe-b) + 10px)} }

.systemBar{position:fixed; left:0; right:0; bottom:0; height:calc(var(--sys-h) + var(--safe-b)); padding:8px 16px calc(8px + var(--safe-b)); background:linear-gradient(180deg, rgba(0,0,0,0.25), rgba(0,0,0,0.45)); backdrop-filter: blur(10px); border-top:1px solid var(--stroke); display:none; align-items:center; justify-content:center; gap:28px; z-index:40} .systemBar.visible{display:flex} .sysBtn{width:46px;height:46px;border-radius:999px;border:1px solid var(--stroke); background:var(--panel);color:var(--text);display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:var(--shadow)} .sysHome{width:86px;border-radius:999px} .sysIcon{width:22px;height:22px}

.camView{width:100%; aspect-ratio:16/9; background:#000; border-radius:14px} .toolbar{display:flex; gap:8px; flex-wrap:wrap; align-items:center; margin-top:10px} .button{border:1px solid var(--stroke); background:var(--panel); color:var(--text); padding:9px 12px; border-radius:12px; cursor:pointer; font-weight:700} .button:hover{background:var(--hover)} .preview{max-width:100%; display:none; border-radius:14px; margin-top:10px} .hint{color:var(--muted); font-size:12px} .switch{display:inline-flex; align-items:center; gap:10px} .switch input{appearance:none;width:50px;height:28px;border-radius:28px;background:#9aa2b1;position:relative;outline:none;transition:background .2s} .switch input:checked{background:var(--accent)} .switch input::after{content:""; position:absolute; top:3px; left:3px; width:22px; height:22px; border-radius:50%; background:#fff; transition:left .2s} .switch input:checked::after{ left:25px } .toast{position:fixed; left:50%; transform:translateX(-50%); bottom:calc(var(--sys-h) + var(--safe-b) + 20px); background:var(--panel); border:1px solid var(--stroke); padding:10px 12px; border-radius:12px; box-shadow:var(--shadow); z-index:50; font-size:13px}

.chat{display:flex; flex-direction:column; gap:10px; height:100%} .chatLog{flex:1; overflow:auto; background:rgba(0,0,0,0.25); border:1px solid var(--stroke); border-radius:12px; padding:10px} .msg{display:flex; gap:8px; margin:6px 0} .msg.me{justify-content:flex-end} .bubble{max-width:80%; padding:10px 12px; border-radius:14px} .me .bubble{background:var(--accent2); color:white; border-top-right-radius:6px} .ai .bubble{background:var(--panel); border:1px solid var(--stroke); border-top-left-radius:6px} .chatInput{display:flex; gap:8px} .chatInput input{flex:1; padding:10px; border-radius:12px; border:1px solid var(--stroke); background:transparent; color:inherit} </style>

<!-- htmlOS: Glass/Blur Kit v1 --><style id="x1coos-glass-v1">
:root{
  --glass-bg: rgba(15,23,42,0.35);
  --glass-brd: rgba(148,163,184,0.22);
  --glass-blur: 14px;
  --glass-sat: 1.15;
}
/* Componente genérico */
.glass {
  background: var(--glass-bg) !important;
  border: 1px solid var(--glass-brd) !important;
  -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-sat)) !important;
  backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-sat)) !important;
  box-shadow: 0 12px 30px rgba(0,0,0,.35);
}

/* Aplicação sem alterar o HTML original — apenas por seletor */
.window,
.startMenu,
.taskbar,
#systemBar {
  -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-sat));
  backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-sat));
  background: var(--glass-bg);
  border-color: var(--glass-brd);
}

/* Título e áreas internas mantêm vidro leve */
.titlebar {
  -webkit-backdrop-filter: blur(10px) saturate(1.1);
  backdrop-filter: blur(10px) saturate(1.1);
}

/* Fallback para navegadores sem suporte */
@supports not ((backdrop-filter: blur(10px)) or (-webkit-backdrop-filter: blur(10px))) {
  .glass,
  .window,
  .startMenu,
  .taskbar,
  #systemBar { background: rgba(30,41,59,0.75) !important; }
}
</style><!-- htmlOS: Weather (WP live tile + app + noblur) --><style id="weather-css-v2">
/* Live Tile — tenta ocupar 2x (grid) e tem fallback para flex */
.appIcon.weather-tile{
  position:relative; overflow:hidden;
  min-width:160px; min-height:160px;
}
/* Se o desktop usar CSS Grid, expandir 2x2 */
#desktop, #iconGrid, #desktop .grid{
  --wx-span-cols: 2;
  --wx-span-rows: 2;
}
#desktop .grid .appIcon.weather-tile{ grid-column: span var(--wx-span-cols,2); grid-row: span var(--wx-span-rows,2); }
.appIcon.weather-tile .wp-face{
  position:absolute; inset:0; padding:10px; display:flex; flex-direction:column; justify-content:space-between;
  border-radius:12px; background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.16);
  backface-visibility:hidden; -webkit-backface-visibility:hidden;
}
.appIcon.weather-tile .wp-front{ z-index:2; }
.appIcon.weather-tile .wp-back{ transform: rotateY(180deg); }
.appIcon.weather-tile .wp-flip{
  position:absolute; inset:0; transform-style:preserve-3d;
  animation: wxFlip 8s infinite ease-in-out;
}
@keyframes wxFlip{
  0%,40%{ transform: rotateY(0deg); }
  50%,90%{ transform: rotateY(180deg); }
  100%{ transform: rotateY(360deg); }
}
.appIcon.weather-tile .row { display:flex; align-items:center; gap:8px; }
.appIcon.weather-tile .bigT { font-size:42px; font-weight:900; line-height:1; }
.appIcon.weather-tile .muted { color:#a8bfe9; font-size:12px }
.appIcon.weather-tile .ico { width:42px; height:42px; line-height:0; }
.appIcon.weather-tile .ico svg{ width:100%; height:100%; }
.appIcon.weather-tile .mini { display:flex; gap:10px; font-size:12px; }
.appIcon.weather-tile .mini div{ display:flex; flex-direction:column; }
.appIcon.weather-tile .lab { font-size:11px; opacity:.9; }

/* Weather App (mesmo index, sem iframe) */
.window[data-id^="w_wx_"] { z-index: 2147483200 !important; }
.window[data-id^="w_wx_"] .content{ padding:0 !important; }
.window[data-id^="w_wx_"],
.window[data-id^="w_wx_"] *{ -webkit-backdrop-filter:none !important; backdrop-filter:none !important; }
.window[data-id^="w_wx_"]::before,
.window[data-id^="w_wx_"]::after,
.window[data-id^="w_wx_"] *::before,
.window[data-id^="w_wx_"] *::after{ display:none !important; content:none !important; pointer-events:none !important; }

.wx-app{ display:flex; flex-direction:column; height:100%; background:rgba(255,255,255,.04); }
.wx-app header{ display:flex; align-items:center; gap:10px; padding:10px 12px;
  border-bottom:1px solid rgba(255,255,255,.16); background:rgba(11,18,32,.72); }
.wx-app header .title{ font-weight:800 } .wx-app header .spacer{ flex:1 }
.wx-app header .search{ display:flex; gap:8px }
wx